{
  "id": null,
  "title": "K6 Load & Kubernetes Scaling",
  "schemaVersion": 30,
  "version": 1,
  "panels": [
    {
      "type": "graph",
      "title": "RPS (Requests per second)",
      "targets": [
        {
          "query": "SELECT sum(\"value\") FROM \"http_reqs\" WHERE $timeFilter GROUP BY time(1s) fill(null)"
        }
      ],
      "yaxes": [
        {"format": "reqps", "label": "RPS", "logBase": 1, "min": 0},
        {"format": "short", "logBase": 1, "min": null}
      ]
    },
    {
      "type": "graph",
      "title": "Latency (p95)",
      "targets": [
        {
          "query": "SELECT percentile(\"value\",95) FROM \"http_req_duration\" WHERE $timeFilter GROUP BY time(1s) fill(null)"
        }
      ],
      "yaxes": [
        {"format": "ms", "label": "Latency", "logBase": 1, "min": 0},
        {"format": "short", "logBase": 1, "min": null}
      ]
    },
    {
      "type": "graph",
      "title": "Errors",
      "targets": [
        {
          "query": "SELECT sum(\"value\") FROM \"http_req_failed\" WHERE $timeFilter GROUP BY time(1s) fill(0)"
        }
      ],
      "yaxes": [
        {"format": "short", "label": "Errors", "min": 0},
        {"format": "short", "min": null}
      ]
    },
    {
      "type": "graph",
      "title": "Kubernetes Pod CPU Usage",
      "targets": [
        {
          "expr": "sum(rate(container_cpu_usage_seconds_total{pod=~\"apache.*\"}[1m]))",
          "refId": "A"
        }
      ],
      "yaxes": [
        {"format": "cores", "label": "CPU Cores", "min": 0},
        {"format": "short", "min": null}
      ]
    },
    {
      "type": "graph",
      "title": "Kubernetes Pod Memory Usage",
      "targets": [
        {
          "expr": "sum(container_memory_usage_bytes{pod=~\"apache.*\"})",
          "refId": "B"
        }
      ],
      "yaxes": [
        {"format": "bytes", "label": "Memory", "min": 0},
        {"format": "short", "min": null}
      ]
    },
    {
      "type": "graph",
      "title": "Number of Pods",
      "targets": [
        {
          "expr": "count(kube_pod_info{pod=~\"apache.*\"})",
          "refId": "C"
        }
      ],
      "yaxes": [
        {"format": "short", "label": "Pods", "min": 0},
        {"format": "short", "min": null}
      ]
    }
  ]
}
